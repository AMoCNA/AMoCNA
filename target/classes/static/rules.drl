import io.github.hephaestusmetrics.model.metrics.complex.VectorMetric;
import com.example.droolsprototype.execution.ExecutionService;
import com.example.droolsprototype.DroolsPrototypeApplication;
import java.lang.Double;
import java.lang.System;



rule "trigger_pod_CPU_request"
    dialect "mvel"
    when
        metric : VectorMetric(
            name == "request_duration_seconds_sum" &&
            value > DroolsPrototypeApplication.CPU_THRESHOLD
        )
        executor : ExecutionService()
    then
        System.out.println("CPU usage too high!");
        executor.reduceCPU();
end
